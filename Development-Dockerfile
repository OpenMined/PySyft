FROM openmined/pysyft:edge

RUN apk add --no-cache git


ENV PYSYFT_DIR /src/PySyft
ENV CAPSULE_DIR /src/Capsule


## Capsule dependency

RUN mkdir $CAPSULE_DIR
WORKDIR $CAPSULE_DIR
RUN git clone https://github.com/OpenMined/Capsule.git .
RUN pip3 install -r requirements.txt
RUN python3 setup.py install

## PySyft Dependency
WORKDIR $PYSYFT_DIR

EXPOSE 8888

CMD ["jupyter", "notebook", "--ip=0.0.0.0", "--allow-root"]
